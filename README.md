# SMM Планировщик постов в социальные сети ВКотакте, Одноклассники, Telegramm через Google Таблицу

Данный проект позволяет:

* Публиковать посты в социальные сети ВКотакте, Одноклассники, Telegramm в заданное время;
* Удалять посты в социальных сетях ВКотакте, Одноклассники, Telegramm в заданное время;
* Отслеживать статус постов (Опубликован, ожидает публикации, удален или ошибка публикации).

## Как установить

Python3 должен быть установлен.
Затем используйте "pip" (или "pip3", есть конфлик с python2) для установки зависимостей:

```pip install -r requerements.txt```

### Перед запуском необходимо:

* создать .env файл где разместить слудующие переменные:
```
SPREADSHEET_ID='table_id'

TELEGRAM_TOKEN='your_telegram_token'
TELEGRAM_CHANNEL_ID='@your_channel_id'

VK_API_KEY = 'your_api_token' (Можно получить по адресу https://vkhost.github.io/) 
VK_OWNER_ID = ID группы Вконтакте куда постить со знаком - вначале (например -1111111)
VK_GROUP_ID = ID группы Вконтакте куда постить (например 1111111)

OK_ACCESS_TOKEN='Токен Одноклассники'
OK_APP_KEY=API Ключ Одноклассники
OK_SESSION_SECRET=Ключ одноклассники
OK_GROUP_ID=ID группы Одноклассники
```
* Создать на docs.google.com excel xlsx таблицу, аналогичную таблице SMM Planner.xlsx, приложенной в данный репозиторий.

SPREADSHEET_ID - id редактируемого документа. Он берётся из url таблицы. Например, таблица имеет url = 'https://docs.google.com/spreadsheets/d/1RG1LQ5Zw-2htl9EqWPr0I8J0TFXZnNqr55o166Q4kW0/edit?pli=1&gid=0#gid=0', из неё часть `1RG1LQ5Zw-2htl9EqWPr0I8J0TFXZnNqr55o166Q4kW0` является spreadsheet_id.

Рекомендуется использовать [vitrualenv/venv](https://docs.python.org/3/library/venv.html) для изоляции проекта.

#### Настройки доступа к Google API

После настройки приложения Google API будут даны ключи доступа. Их необходимо скачать и назвать `client_secretы.json`, который нужно будет положить в корень проекта. При первом запуске скрипта `auth.py` вас выбросит в браузер для подтверждения передачи прав доступа. После подтверждения у вас появится файл `token.json`. 

Для получения прав доступа для работы с Google Drive запускаем `auth_2.py`. Файл `settings.yaml` должен лежать в той же директории, что и запускаемый скрипт. Вас опять выбросит в браузер для подтверждения передачи прав доступа. После успешно передачи создаётся файл `credentials.json`

## Работа с таблицей планировщика

* Ячейка "Дата" должна содержать дату публикации поста в формате `dd.mm.yy` (если указать прошедшую дату пост будет сразу опубликован);

* Ячейка "Время" должна содержать время в формате `hh:mm` в 24-часовом формате (если указать прошедшее время пост будет сразу опубликован);

* Ячейка "Текст" должна содержать ссылку на google.docs документ с текстом поста;

* Ячейка "Картинка" должна содержать ссылку на картинку или гиф файл с расширением файла на конце (например `https://i.pinimg.com/736x/4d/10/d1/4d10d1797711846a6dfbc4d51d6b3bdb.jpg`), или ссылку на google.drive изображение;

* Ячейка "Удалить в" в должна содержать дату и время удаления поста в формате `dd.mm.yy hh:mm` в 24-часовом формате.

## Как запустить

Для запуска скрипта убедитесь что вложили в папку проекта файл .env со всеми требуемыми переменными.

* Откройте консоль;
* Перейдите в консоли в папку с скриптом;
* введите в консоль команду запуска проекта:
```
python main.py
```
* Внесите информацию о постах в таблицу;
